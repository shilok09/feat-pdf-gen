<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Oferta #{{ offer_id }}</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    @page {
      size: A4;
      margin: 0;
    }
    body {
      font-family: 'Montserrat', 'Helvetica Neue', Arial, sans-serif;
      font-size: 11px;
      line-height: 1.7;
      color: #111214;
      margin: 0;
      padding: 0;
      background: #ffffff;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    .container {
      width: 210mm;
      height: 297mm;
      background: #ffffff;
      margin: auto;
      padding: 30px 40px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      page-break-inside: avoid;
      overflow: hidden;
    }
    header {
      position: relative;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #e5e5e7;
      page-break-inside: avoid;
      page-break-after: avoid;
      min-height: 60px;
    }
    header .offer-info {
      display: inline-block;
      max-width: 60%;
    }
    header .offer-info h1 {
      font-size: 28px;
      font-weight: 700;
      margin: 0 0 8px 0;
      color: #111214;
      letter-spacing: -0.5px;
    }
    header .offer-info .date {
      font-size: 12px;
      color: #86868b;
      font-weight: 400;
      letter-spacing: 0.3px;
    }
    header .company-logo {
      position: absolute;
      top: 0;
      right: 0;
      text-align: right;
    }
    header .company-logo img {
      max-height: 40px;
      max-width: 120px;
      object-fit: contain;
      filter: grayscale(100%) contrast(120%) brightness(80%);
      display: block;
      margin-left: auto;
    }
    .info-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
      page-break-inside: avoid;
      page-break-after: avoid;
    }
    .info-card {
      background: #fafafa;
      padding: 18px 20px;
      border-radius: 12px;
    }
    .info-card h2 {
      font-size: 13px;
      font-weight: 700;
      color: #0071e3;
      margin-bottom: 15px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    .info-card .detail-row {
      display: flex;
      margin-bottom: 6px;
      line-height: 1.5;
    }
    .info-card .detail-label {
      font-size: 10px;
      font-weight: 600;
      color: #86868b;
      min-width: 80px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .info-card .detail-value {
      font-size: 11px;
      font-weight: 400;
      color: #111214;
    }
    .section-divider {
      height: 1px;
      background: linear-gradient(to right, transparent, #e5e5e7, transparent);
      margin: 25px 0;
      page-break-inside: avoid;
    }
    .products-section {
      margin-bottom: 20px;
      page-break-inside: auto;
    }
    .products-section h2 {
      font-size: 16px;
      font-weight: 700;
      color: #111214;
      margin-bottom: 15px;
      letter-spacing: -0.3px;
      page-break-after: avoid;
    }
    .products-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      background: #ffffff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
    }
    .products-table thead {
      background: #0071e3;
    }
    .products-table th {
      padding: 14px 12px;
      font-size: 10px;
      font-weight: 600;
      color: #ffffff;
      text-align: left;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      border: none;
    }
    .products-table th:first-child {
      padding-left: 20px;
    }
    .products-table th:last-child {
      padding-right: 20px;
      text-align: right;
    }
    .products-table th.center {
      text-align: center;
    }
    .products-table tbody tr {
      border-bottom: 1px solid #f5f5f7;
      transition: background 0.2s ease;
    }
    .products-table tbody tr:hover {
      background: #fafafa;
    }
    .products-table tbody tr:last-child {
      border-bottom: none;
    }
    .products-table td {
      padding: 12px 12px;
      font-size: 11px;
      color: #111214;
      border: none;
      vertical-align: middle;
    }
    .products-table td:first-child {
      padding-left: 20px;
      font-weight: 600;
      color: #86868b;
    }
    .products-table td:last-child {
      padding-right: 20px;
      text-align: right;
      font-weight: 700;
      font-size: 12px;
      color: #111214;
    }
    .products-table td.center {
      text-align: center;
    }
    .products-table .product-name {
      font-weight: 500;
      line-height: 1.5;
      color: #111214;
    }
    .products-table .discount {
      color: #0071e3;
      font-weight: 700;
    }
    .product-thumb {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      object-fit: cover;
      margin-right: 8px;
      vertical-align: middle;
      border: 1px solid #e5e5e7;
    }
    .summary-section {
      display: flex;
      justify-content: flex-end;
      margin-top: 15px;
      page-break-inside: avoid;
      page-break-after: avoid;
    }
    .summary-box {
      background: #f6f7f8;
      padding: 18px 25px;
      border-radius: 12px;
      min-width: 320px;
    }
    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
      font-size: 12px;
    }
    .summary-row:last-child {
      margin-bottom: 0;
      padding-top: 12px;
      border-top: 2px solid #e5e5e7;
      margin-top: 8px;
    }
    .summary-label {
      font-weight: 400;
      color: #86868b;
    }
    .summary-value {
      font-weight: 600;
      color: #111214;
    }
    .summary-row.total .summary-label {
      font-weight: 700;
      color: #111214;
      font-size: 14px;
    }
    .summary-row.total .summary-value {
      font-weight: 700;
      color: #0071e3;
      font-size: 16px;
    }
    .benefits-section {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin: 15px 0;
      padding: 20px 0;
      border-top: 1px solid #e5e5e7;
      border-bottom: 1px solid #e5e5e7;
      page-break-inside: avoid;
      page-break-after: avoid;
    }
    .benefit-item {
      text-align: center;
    }
    .benefit-icon {
      font-size: 14px;
      margin-bottom: 10px;
      color: #0071e3;
    }
    .benefit-label {
      font-size: 7px;
      font-weight: 600;
      color: #111214;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .signature-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 40px;
      margin-top: auto;
      padding-top: 20px;
      page-break-inside: avoid;
      page-break-before: avoid;
    }
    .signature-box {
      text-align: center;
    }
    .signature-line {
      border-top: 1px solid #86868b;
      width: 70%;
      margin: 0 auto 10px auto;
      padding-top: 15px;
    }
    .signature-label {
      font-size: 10px;
      color: #86868b;
      font-weight: 400;
      letter-spacing: 0.5px;
    }
    .signature-name {
      font-size: 11px;
      color: #111214;
      font-weight: 600;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="offer-info">
        <h1>Oferta #{{ offer_id }}</h1>
        <div class="date">Data: {{ date }}</div>
      </div>
      <div class="company-logo">
       <img src="https://uhldhrwvpbhbfurebvao.supabase.co/storage/v1/object/public/logo-images/coffeecups.jpg" alt="CoffeeCups Logo" class="logo">
      </div>
    </header>

    <div class="info-section">
      <div class="info-card">
        <h2>Sprzedający</h2>
        <div class="detail-row">
          <span class="detail-label">Firma:</span>
          <span class="detail-value">{{ seller.company }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Adres:</span>
          <span class="detail-value">{{ seller.address }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">NIP:</span>
          <span class="detail-value">{{ seller.nip }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Email:</span>
          <span class="detail-value">{{ seller.email }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Telefon:</span>
          <span class="detail-value">{{ seller.phone }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Strona:</span>
          <span class="detail-value">{{ seller.website }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">IBAN:</span>
          <span class="detail-value">{{ seller.iban }}</span>
        </div>
      </div>

      <div class="info-card">
        <h2>Klient</h2>
        <div class="detail-row">
          <span class="detail-label">Firma:</span>
          <span class="detail-value">{{ client.company }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Adres:</span>
          <span class="detail-value">{{ client.address }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Email:</span>
          <span class="detail-value">{{ client.email }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Telefon:</span>
          <span class="detail-value">{{ client.phone }}</span>
        </div>
      </div>
    </div>

    <div class="section-divider"></div>

    <div class="products-section">
      <h2>Szczegóły Oferty</h2>
      <table class="products-table">
        <thead>
          <tr>
            <th>Lp.</th>
            <th>Nazwa Produktu</th>
            <th class="center">Ilość</th>
            <th class="center">Cena Jedn.</th>
            <th class="center">Rabat</th>
            <th class="center">VAT</th>
            <th>Razem</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.id }}</td>
            <td class="product-name">{{ item.name }}</td>
            <td class="center">{{ item.quantity }}</td>
            <td class="center">{{ item.unit_price }} PLN</td>
            <td class="center discount">{{ item.discount }}%</td>
            <td class="center">{{ item.vat }}%</td>
            <td>{{ item.total }} PLN</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div class="summary-section">
      <div class="summary-box">
        <div class="summary-row">
          <span class="summary-label">VAT:</span>
          <span class="summary-value">{{ summary.vat }} PLN</span>
        </div>
        <div class="summary-row total">
          <span class="summary-label">Suma Łącznie:</span>
          <span class="summary-value">{{ summary.total }} PLN</span>
        </div>
      </div>
    </div>

    <div class="benefits-section">
      <div class="benefit-item">
        <div class="benefit-icon"><i class="fas fa-seedling"></i></div>
        <div class="benefit-label">Ekologiczne</div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon"><i class="fas fa-gem"></i></div>
        <div class="benefit-label">Premium</div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon"><i class="fas fa-paint-brush"></i></div>
        <div class="benefit-label">Personalizacja</div>
      </div>
      <div class="benefit-item">
        <div class="benefit-icon"><i class="fas fa-shield-alt"></i></div>
        <div class="benefit-label">Trwałe</div>
      </div>
    </div>

    <div class="signature-section">
      <div class="signature-box">
        <div class="signature-line"></div>
        <div class="signature-label">Data i podpis</div>
        <div class="signature-name">CoffeeCups.com.pl</div>
      </div>
      <div class="signature-box">
        <div class="signature-line"></div>
        <div class="signature-label">Data i podpis</div>
        <div class="signature-name">Klient</div>
      </div>
    </div>
  </div>
</body>
</html>
